{"componentChunkName":"component---src-templates-lesson-template-js","path":"/state-machine","result":{"data":{"markdownRemark":{"html":"<p>The requirements we set out for this game read very much like what a <a href=\"https://xstate.js.org/docs/about/concepts.html#finite-state-machines\">finite state machine</a> is. I swear this is the only computer sciencey thing we're going to chat about, but luckily this one isn't as complicated as many of the others.</p>\n<p>I'll borrow the example from the <a href=\"https://xstate.js.org/docs/about/concepts.html#finite-state-machines\">XState</a> docs (great library that helps you do finite state machines.) You, as a human, are always either asleep or awake. You are never both awake and asleep, and you never neither awake nor alseep: you are always in exactly one of those states. (Let's not have a medical discussion here, lol, you get my point.)</p>\n<p>This is what a finite state machine is: it let's you define various states of what you expect your app to look like and then all \"derivative\" state is â€¦ derived from that chief state. For example, if you were in a <code class=\"language-text\">asleep</code> state, you might have a derived state that is <code class=\"language-text\">areEyesClosed</code> that would always be true in <code class=\"language-text\">asleep</code>. This is instead of the problematic way of having a million <code class=\"language-text\">is&lt;Something&gt;</code> booleans in your code which always fall out of sync.</p>\n<p>So that's what we're going to do is model a basic finite state machine that represents our game. Based on the requirements, I can see the following overarching states of the game:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"INIT\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"HATCHING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"IDLING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"SLEEPING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"EATING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"POOPING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"HUNGRY\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"CELEBRATING\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"DEAD\"</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>At any given time, our game is in one of those states. Furthermore, there are definited transitions. Your game can't go from <code class=\"language-text\">HATCHING</code> to <code class=\"language-text\">DEAD</code> or else you'd have a pretty morbid and unfun game. Instead, <code class=\"language-text\">HATCHING</code> can <em>only</em> go to <code class=\"language-text\">IDLING</code>. We can take advantage of these to make assumptions and reduce our surface area for bugs.</p>\n<p>Something like <code class=\"language-text\">XState</code> could help a lot with a game like this, and I implore to you take <a href=\"https://twitter.com/davidkpiano\">David Khourshid's</a> upcoming <a href=\"https://frontendmasters.com/teachers/david-khourshid/\">Frontend Masters workshop</a> because he'll get into more depth in it. Instead, we're just going to take the base level concepts and apply them ourselves.</p>\n<p>Let's make a new file and call it gameState.js inside of <code class=\"language-text\">src</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gameState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  current<span class=\"token punctuation\">:</span> <span class=\"token string\">\"INIT\"</span><span class=\"token punctuation\">,</span>\n  clock<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>clock<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>clock<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>clock<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> gameState<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Back in init, change the the init.js,</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// add at top</span>\n<span class=\"token keyword\">import</span> game <span class=\"token keyword\">from</span> <span class=\"token string\">\"./gameState\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// delete tick function</span>\n\n<span class=\"token comment\">// change tick()</span>\ngame<span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Now we've accomplished a few things. We have an in-game clock that ticks. We can tie our state machine to these ticks of the clock. But also what's great is we decoupled our state machine from an actual clock, so it'll work in game but we can also pull out the game state and test it outside of real time.</p>\n<p>From here, we're going to be all getting from one state to another.</p>\n<p>I guess it bears mentioning here that I like to write the logic first and then I write the manifestation of the HTML and CSS afterwards. If you think about it, our UI is just a manifest of our state machine. It's a side effect of this ever-moving machine.</p>","frontmatter":{"path":"/state-machine","title":"State Machine","order":"3C","section":"Architecture","description":"The Project"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"2B","path":"/build-process","title":"Build Process"}}},{"node":{"frontmatter":{"order":"2D","path":"/code-formatting","title":"Code Formatting"}}},{"node":{"frontmatter":{"order":"2C","path":"/code-style","title":"Code Style"}}},{"node":{"frontmatter":{"order":"5A","path":"/conclusion","title":"Wrapping Up"}}},{"node":{"frontmatter":{"order":"4G","path":"/death","title":"Death"}}},{"node":{"frontmatter":{"order":"2E","path":"/editor-setup","title":"Editor Setup"}}},{"node":{"frontmatter":{"order":"2A","path":"/hello-world","title":"Hello World"}}},{"node":{"frontmatter":{"order":"3B","path":"/init","title":"Init the Project"}}},{"node":{"frontmatter":{"order":"4B","path":"/interacting-with-the-ui","title":"Interacting with the UI"}}},{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"2F","path":"/linting","title":"Linting"}}},{"node":{"frontmatter":{"order":"3A","path":"/organization","title":"Organizing Your Code"}}},{"node":{"frontmatter":{"order":"4E","path":"/pooping","title":"Pooping"}}},{"node":{"frontmatter":{"order":"4A","path":"/some-ui","title":"Some UI"}}},{"node":{"frontmatter":{"order":"3C","path":"/state-machine","title":"State Machine"}}},{"node":{"frontmatter":{"order":"2G","path":"/testing","title":"Testing"}}},{"node":{"frontmatter":{"order":"1B","path":"/the-project","title":"The Project"}}},{"node":{"frontmatter":{"order":"4C","path":"/the-states","title":"The States"}}},{"node":{"frontmatter":{"order":"4D","path":"/transitioning-between-states","title":"Transitioning Between States"}}},{"node":{"frontmatter":{"order":"2H","path":"/type-checking","title":"Type Checking"}}}]}},"pageContext":{}}}